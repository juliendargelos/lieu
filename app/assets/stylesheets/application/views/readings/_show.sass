.readings-show
  height: 100%
  overflow: hidden
  position: fixed
  opacity: 0
  animation: readings-show .4s .5s forwards

  &__first
    width: 100%
    height: 100%
    top: 0
    left: 0
    position: absolute
    z-index: 10

  &__connection
    background: $blue
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center

  &__book-content
    height: 100%
    padding: 30px
    text-align: center
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center

    +modifiers(background-color, $book-background-colors)
    +modifiers(color, $book-colors)

  &__book-icon
    width: 100px
    height: 100px
    margin-bottom: 60px

  &__book-title
    font-weight: 500
    font-size: 40px
    margin-bottom: 30px
    letter-spacing: 1px

  &__book-author
    font-weight: 300
    margin-bottom: 50px

  &__book-separator
    width: 100px
    height: 10px
    background: $white
    margin: 0 auto
    margin-bottom: 60px

  &__book-number-of-chapters
    font-size: 50px
    font-weight: $font-light
    text-align: center

    &::after
      content: 'chapitres'
      display: block
      font-size: 14px
      font-weight: $font-semi-bold

  &__users
    width: 100%
    top: 0
    left: 0
    z-index: 2
    position: absolute
    padding: 30px
    display: flex
    align-items: top
    justify-content: start

  &__user
    display: inline-block
    text-align: center
    flex-grow: 0
    flex-shrink: 0

    &:first-of-type
      margin: 0 10px 0 auto

    &:last-of-type
      margin: 0 0 0 10px

    &--center
      &:first-of-type
        margin: 0 30px 0 auto

      &:last-of-type
        margin: 0 auto 0 30px

      .readings-show__user-pseudo
        opacity: 0
        font-size: 0

  &__user-pseudo
    margin-top: 10px
    font-size: 12px
    font-weight: bold
    color: $blue
    display: inline-block
    word-break: keep-all

  &__user-avatar
    background-color: $white
    width: 70px
    height: 70px
    margin: 0 auto
    padding-top: 5px
    border-radius: 70px
    border: 3px solid $orange
    position: relative

    &--empty
      display: flex
      flex-direction: columnd
      align-items: center
      justify-content: center
      overflow: hidden

      &::before
        content: '...'
        font-size: 40px
        padding: 0 0 27px 5px
        display: block
        color: $blue
        text-align: center
        letter-spacing: 5px

      &::after
        content: ''
        background: linear-gradient(90deg, rgba($white, 0) 0%, $white 35%, $white 65%, rgba($white, 0) 100%)
        width: 200%
        height: 100%
        top: 0
        left: -200%
        position: absolute
        display: block
        animation: avatar--empty-after 1s infinite linear

  &__wrapper
    height: 100%
    display: flex
    flex-direction: column

  &__container
    height: 100%
    display: flex
    flex-grow: 1

  &__timeline
    margin: 35px 0 20px 0
    flex-grow: 0
    flex-shrink: 0

  &__section
    height: 100%
    flex-grow: 1
    flex-basis: 0

    &::before
      content: ''
      background: $white
      width: 100%
      height: 100%
      top: 0
      left: 0
      opacity: 0
      z-index: 10
      pointer-events: none
      position: absolute
      display: block
      transition: .2s

    &--hidden::before
      opacity: 1

  &__chapter
    position: relative
    perspective: 5000px
    transition: .3s

    &--hidden
      width: 0
      flex-grow: 0
      margin-right: -10px

  &__chapter-page
    background: $white
    top: 0
    left: 0
    width: 100%
    height: 100%
    padding-top: 50px
    position: absolute
    overflow: hidden

    &::before, &::after
      content: ''
      width: 100%
      left: 0
      pointer-events: none
      position: absolute
      z-index: 2
      display: block

    &::before
      height: calc(100% - 130px)
      top: 50px
      border: 0 solid $white
        top-width: 40px
        bottom-width: 40px

    &::after
      background: linear-gradient(to top, $white 0%, rgba($white, 0) 100%), linear-gradient(to bottom, $white 0%, rgba($white, 0) 100%)
        repeat: no-repeat
        position: left bottom, left top
        size: 100% 100px
      height: calc(100% - 130px)
      top: 90px

  &__chapter-icon
    width: 70px
    height: 70px
    left: 20px
    top: 20px
    border: 10px solid transparent
    border-radius: 70px
    z-index: 2
    display: block
    position: absolute

    +modifiers(background-color, $book-background-colors)

    &--center
      left: 50%
      transform: translateX(-50%)

  &__chapter-position
    margin-bottom: 30px
    z-index: 2
    font-weight: normal
    font-size: 80px
    color: $blue
    text-align: center

    &--small
      top: 45px
      left: 110px
      font-weight: lighter
      margin-bottom: 0
      font-size: 18px
      position: absolute
      display: flex
      align-items: center

      &::before
        content: 'Chapitre'
        font-size: 10px
        font-weight: bold
        +uppercase
        margin:
          top: 2px
          right: 5px

  &__chapter-wrapper
    width: 100%
    height: 100%
    max-width: 800px
    margin: 0 auto
    overflow: hidden

  &__chapter-container
    overflow: auto
    -webkit-overflow-scrolling: touch
    width: calc(100% + 60px)
    height: 100%
    left: 50%
    padding: 90px 110px
    position: relative
    transform: translateX(-50%)

  &__chapter-content
    font-size: 20px
    line-height: 2em
    color: $blue
    text-align: justify

  &__chapter-title
    font-size: 40px
    text-align: center
    font-weight: bold
    margin-bottom: 30px
    color: $blue

  &__chapter-next
    width: 0
    left: 0
    top: 100%
    left: 100%
    display: block
    cursor: pointer
    position: absolute
    transform: translate3d(-50%, -50%, 0) rotate(135deg)
    border: 100px solid $blue
    z-index: 11
    transition: .2s

    &:hover
      border-width: 110px

  &__chapter-end
    top: 100%
    left: 50%
    z-index: 3
    margin-top: -30px
    position: absolute
    transform: translate(-50%, -100%)

  &__draw
    background-color: $white
    margin-right: 10px
    position: relative
    transition: .3s .5s

    &--hidden
      width: 0
      margin-left: -10px
      flex-grow: 0
      transition: .3s .3s

      .dreamy-sketch
        opacity: 0
        transition: .3s

    &--connected
      background:
        repeat: no-repeat
        position: center center
        size: contain
      transition: .3s

  &__draw-title
    width: 100%
    padding: 30px
    color: $orange
    font-size: 16px
    font-weight: bold
    text-align: center
    line-height: 2em
    line-height: 1.8em

  &__draw-fold
    background: $orange
    width: 30px
    height: 30px
    top: 50%
    left: 100%
    z-index: 4
    cursor: pointer
    position: absolute
    transform: translateY(-50%)
    transition: .2s

    &:hover
      width: 40px

    &::after
      content: ''
      top: 0
      left: 100%
      border: 15px solid transparent
        top-color: $orange
        bottom-color: $orange
      display: block
      position: absolute
      transform: translateX(-50%)

  &__draw-submit
    top: 100%
    left: 100%
    margin:
      top: -30px
      left: -30px
    position: absolute
    transform: translate(-100%, -100%)

    &--bounce
      animation: bounce-bottom-left .4s

  &__challenge
    width: 100%
    padding: 0 30px
    position: absolute

    &--small
      width: 100%
      height: auto
      text-align: center
      top: 30px

    &--big
      top: 50%
      left: 50%
      font-weight: 600
      max-width: 500px
      line-height: 22px
      transform: translate(-50%, -50%)
      text-align: center

    &--bounce
      animation: bounce .4s

    &--big#{&}--bounce
      animation: bounce-center .4s

  &__challenge-position
    height: auto
    font-size: 60px
    font-weight: normal
    text-align: center
    color: $orange
    line-height: normal

    &::before
      content: 'DÃ©fis'
      margin-bottom: -10px
      font-weight: bold
      font-size: 16px
      display: block
      +uppercase

    &--small
      margin-bottom: 10px
      display: flex
      align-items: center
      justify-content: center
      font:
        size: 18px
        weight: lighter

      &::before
        margin-bottom: 0
        font:
          size: 10px
          weight: bold
        margin:
          top: 2px
          right: 5px
          bottom: 0

  &__challenge-instruction
    text-align: center
    margin-bottom: 30px
    color: $orange
    font-size: 16px
    font-weight: bold
    line-height: 1.8em

    &--big
      font-size: 22px

  &__challenge-start
    max-width: 100%
    width: 200px

  .dreamy-sketch
    background:
      repeat: no-repeat
      position: center center
      size: contain
    width: 100%
    height: 100%
    z-index: 0
    transition: .3s

    &--hidden
      opacity: 0
      transtion: 0

  .fade, .fade-scale
    &-enter-active, &-leave-active
      transition: .3s

    &-enter, &-leave-to
      opacity: 0

  .fade-scale
    &-enter, &-leave-to
      transform: scale(.8)

  .fade-delay
    &-enter-active
      transition: .3s 1s

    &-leave-active
      transition: .3s

    &-enter, &-leave-to
      opacity: 0

  .fade-up, .fade-up-center
    &-enter-active
      transition: .4s

    &-enter
      opacity: 0
      transform: translateY(30px)

    &-leave-active
      transition: .3s

    &-leave-to
      opacity: 0

  .fade-up-center
    &-enter-active
      transition: .3s .8s

    &-enter
      transform: translate(-50%, calc(-50% + 30px))

    &-leave-to
      transform: translate(-50%, calc(-50% - 30px))

  .enter-right
    &-enter-active
      &, .readings-show__draw-fold
        transition: .2s .5s

    &-leave-active
      &, .readings-show__draw-fold
        transition: .2s

    &-enter, &-leave-to
      .readings-show__draw-fold
        transform: translate(calc(-100% - 15px), -50%)

  .page
    &-enter-active
      transition: .4s

    &-leave-active
      &, .readings-show__chapter-next
        transition: .6s

    &-enter
      opacity: 0

    &-leave-to
      .readings-show__chapter-next
        border-width: 110vw

@keyframes readings-show
  from
    opacity: 0

  to
    opacity: 1

@keyframes bounce
  50%
    transform: scale(1.2)

@keyframes bounce-center
  50%
    transform: translate(-50%, -50%) scale(1.2)

@keyframes bounce-bottom-left
  50%
    transform: translate(-100%, -100%) scale(1.2)

@keyframes avatar--empty-after
  from
    left: -200%

  to
    left: 100%
