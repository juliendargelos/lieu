<% if false %>
  <% unless @reading.beggined? %>
    <div class="readings-show__first container container--full-screen wrapper wrapper--fill-height wrapper--small-padding wrapper--padding--both books-index__container">
      <%= render 'readings/book_cover', book: @reading.book %>
      <span class="next-step" onclick="this.parentNode.parentNode.removeChild(this.parentNode)"></span>
    </div>

    <% if @connecting %>
      <div class="readings-show__first container container--full-screen wrapper wrapper--fill-height wrapper--small-padding wrapper--padding--both books-index__container" id="reading-connection-<%= @reading.connection.id %>">
        <div class="readings-show__connection container container--full-screen">
          <%= render @reading.connection %>
        </div>
      </div>

      <script>
        setTimeout(function() {
          var connection = document.getElementById(<%= "reading-connection-#{@reading.connection.id}".to_json.html_safe %>)

          connection.style.transition = '1s'
          setTimeout(function() {
            connection.style.opacity = 0
          }, 1)

          setTimeout(function() {
            connection.parentNode.removeChild(connection)
          }, 1001)
        }, 7000)
      </script>
    <% end %>
  <% end %>
<% end %>

<%
  connected_user = @reading.connected_reading&.user

  if connected_user.present?
    connected_user = {
      pseudo: connected_user.pseudo,
      initial: connected_user.initial,
      avatar: {
        sweater: connected_user.avatar.sweater
      }
    }
  else
    connected_user = { avatar: {} }
  end
%>

<%= vue(:reading,
  chapters: @chapters,
  chapter_id: @reading.chapter_id,
  reading_id: @reading.id,
  current_user: {
    pseudo: current_user.pseudo,
    initial: current_user.initial,
    avatar: {
      sweater: current_user.avatar.sweater
    }
  },
  connected_user: connected_user
) %>
